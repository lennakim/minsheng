<h2>手机注册</h2>

<%= form_for(@user,:url => mobile_create_path ) do |f| %>

    <p><%= f.label :name, "用户名" %>
      <br/>
      <%= f.text_field :name %></p>

    <div><%= f.label :password, "密码" %>
      <br/>
      <%= f.password_field :password %></div>

    <div><%= f.label :password_confirmation, "确认密码" %>
      <br/>
      <%= f.password_field :password_confirmation %></div>

    <div><%= f.label :mobile, "手机号码" %>
      <br/>
      <%= f.text_field :mobile %>
        <input type="button" id="sendCaptchaCodeBtn" class="btn" value="免费获取验证码" url="<%=mobile_send_sms_path %>">
    </div>
    <div>
      <br/>
       <input type="text" name="captcha_code" id="captcha_code" >
       <input type="button" id="verifyBtn" class="btn" value="验证手机" url="<%= mobile_verify_mobile_path %>">
    </div>
    <div><%= f.submit "立即注册" %></div>
<% end %>

<%= content_for :foot do %>
  <script>
    $("#sendCaptchaCodeBtn").click(function(){
        var mobile = $("#user_mobile").val();
        var url = $(this).attr("url");

        $.ajax({
          url: url,
          type: 'GET',
          data: { mobile: mobile },
          success: function(data){
            alert(data.message)
          }
        });
    });

    $("#verifyBtn").bind('click',function(){
        var mobile = $("#user_mobile").val();
        var captcha_code = $("#captcha_code").val();
        var url = $(this).attr("url");

        $.ajax({
          url: url,
          type: 'GET',
          data: { captcha_code: captcha_code, mobile: mobile },
          success: function(data){
            alert(data.message)
          }
        });
      });
  </script>

<% end %>